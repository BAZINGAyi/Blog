---
layout: post
tags: [js] # add tag
img: js-head.png
---
# Ajax

Asynchconous JavaScript And XML

[Google Api](https://developers.google.com/apis-explorer/)

[Search Api](http://www.programmableweb.com/apis/directory)

# XHR  

[MDN's docs](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/open)

[WHATWG Spec](https://xhr.spec.whatwg.org/)

[W3C Spec](https://www.w3.org/TR/XMLHttpRequest/)


## XHR's .open 

添加访问的网址和请求的参数

```
const asyncRequestObject = new XMLHttpRequest();
asyncRequestObject.open('GET', 'https://unsplash.com');
```

```
const myAsyncRequest = new XMLHttpRequest();
myAsyncRequest.open('GET', 'https://unsplash.com/', false);

// false 代表请求将是同步的
```

## XHR's .send

发送请求

```
myAsyncRequest.send();
```

处理请求

```
function handleSuccess () {
    console.log( this.responseText ); // the HTML of https://unsplash.com/
}

asyncRequestObject.onload = handleSuccess;

function handleError () {
    // in the function, the `this` value is the XHR object
    console.log( 'An error occurred' );
}

asyncRequestObject.onerror = handleError;
```

### 完整的 XHR 请求

```
function handleSuccess () {
  const data = JSON.parse( this.responseText ); // convert   data from JSON to a JavaScript object
  console.log( data ); 
  console.log( this.responseText ); 
// the HTML of https://unsplash.com/}
function handleError () { 
  console.log( 'An error occurred \uD83D\uDE1E' );
}
const asyncRequestObject = new XMLHttpRequest();
asyncRequestObject.open('GET', 'https://unsplash.com');
asyncRequestObject.onload = handleSuccess;
asyncRequestObject.onerror = handleError;
asyncRequestObject.send();
```


