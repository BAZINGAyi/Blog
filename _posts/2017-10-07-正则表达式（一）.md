---
layout: post
category: "python"
---
# 正则表达式（一）
**一、在 Python 中搜索和匹配的比较**

1.  当谈到字符串**模式**相关的正则表达式时，用到术语“模式匹配”。其中有两种方法完成模式匹配**”搜索“**和**”匹配“**.
2.  **"搜索:"**在字符串任意部分中搜索匹配的模式.使用函数`search()`
3.  **“匹配:”**判断一个字符串是能否从起始处全部或者部分地匹配某个模式.使用函数`match()`

**二、匹配规则**


**'/d' 匹配任何一位数字**

```python
def regex1():
    rule1            =  '\d\d\d-\d\d\d-\d\d\d'
    rule_same_rule1  =  '\d{3}-\d{3}-\d{4}'
    phone_num_regex  =  re.compile( rule_same_rule1 )
    source           =  "412-221-1231"
    result           =  phone_num_regex.search( source )
    print result.group()

    #结果：
    #412-221-1231
```
**'()' 添加括号在正则表达式中添加分组**

```python
def regex2():
    rule1           =  '(\d\d\d)-(\d{3}-\d{4})'
    rule2           =  '(\(\d\d\d\)) (\d\d\d-\d\d\d\d)'
    str1            =  'My number is 415-555-4242'
    str2            =  'My number is (415) 555-4242.'
    phone_num_regex =  re.compile( rule1 )
    result          =  phone_num_regex.search( str1 )

    print 'group(0):' + result.group( 0 )
    print 'group(1):' + result.group( 1 )
    print 'group(2):' + result.group( 2 )

    area_code, main_number = result.groups()
    print 'groups:'
    print area_code
    print main_number

    #结果：
    #group(0):415-555-4242
    #group(1):415
    #group(2):555-4242
    #groups:
    #415
    #555-4242
```
**'|' 用管道匹配多个表达式中的第一个出现的字符串**


```python
    def regex3():
    hero_regex       =  re.compile( r'Batman|Tina Fey' )
    result           =  hero_regex.search( 'Batman and Tina Fey.' )
    print 'group():' +  result.group()
    result           =  hero_regex.search( r'Tina Fey and Batman' )
    print 'group():' +  result.group()


    bat_regex        =  re.compile( r'Bat(man|mobile|copter|bat)' )
    result           =  bat_regex.search( 'Batmobile lost a wheel' )
    print 'group():' +  result.group()
    print 'group(1):'+  result.group(1)

    #结果：
    #group():Batman
    #group():Tina Fey
    #group():Batmobile
    #group(1):mobile
```
**'?' 实现可选匹配,不论选择的文本是否存在都会匹配成功,表示要匹配的文本出现 0 次或 1 次**

```python
def regex4():
    bat_regex        =  re.compile('Bat(wo)?man')
    result           =  bat_regex.search('The Adventures of Batman')
    print '没有含有要匹配的文本:' + result.group()

    result           = bat_regex.search('The Adventures of Batwoman')
    print '含有要匹配的文本:' + result.group()

    #结果:
    #没有含有要匹配的文本:Batman
    #含有要匹配的文本:Batwoman
```
 __'*' 匹配 0 次或 多次 * 号之前的分组__


```python
def regex5():
    bat_regex        = re.compile(r'Bat(wo)*man')
    result           = bat_regex.search('The Adventures of Batwoman')
    print '含有一个匹配的文本:' + result.group()

    result           = bat_regex.search('The Adventures of Batman')
    print '不含有需要匹配的文本:' + result.group()

    result           = bat_regex.search('The Adventures of Batwowowoman')
    print '含有多个需要匹配的文本:' + result.group()

    #结果:
    #含有一个匹配的文本:Batwoman
    #不含有需要匹配的文本:Batman
    #含有多个需要匹配的文本:Batwowowoman
```
**'{}' 花括号匹配特定次数**

```python
def regex6():
    bat_regex        = re.compile(r'(Ha){3}')
    result           = bat_regex.search('HaHaHa')
    print '正确匹配:' + result.group()

    result           = bat_regex.search('HaHa')
    print ('没有匹配成功','匹配成功') [ result is None ]

    bat_regex        = re.compile(r'(Ha){0,5}')
    result           = bat_regex.search('HaHaHaHa')
    print '多次正确的匹配' + result.group()
    result           = bat_regex.search('Wow')
    print '0次也可以匹配成功' + result.string

    #结果:
    #正确匹配:HaHaHa
    #匹配成功
    #多次正确的匹配:HaHaHaHa
    #0次也可以匹配成功:Wow
```

**贪心和非贪心匹配**

```python
def regex7():
    greedy_ha_regex = re.compile(r'(Ha){3,5}')
    mo1             = greedy_ha_regex.search('HaHaHaHaHa')
    print '默认下是匹配的结果是:' + mo1.group()

    greedy_ha_regex = re.compile(r'(Ha){3,5}?')
    mo2             = greedy_ha_regex.search('HaHaHaHaHaHa')
    print "加 '?' 号匹配为最短的字符串:" + mo2.group()

    #结果:
    #默认下是匹配的结果是:HaHaHaHaHa
    #加 '?' 号匹配为最短的字符串:HaHaHa
```

**search() 和 findall() 的区别**

```python
def regex8():
    phone_num       = 'Cell: 415-555-9999 Work:212-555-0000'
    phone_num_regex = re.compile(r'\d{3}-\d\d\d-\d{3}')
    mo              = phone_num_regex.search(phone_num)
    print 'search() 的搜索结果是:' + mo.group()
    print 'search() 返回 Match 对象， 包含被查找字符串中的"第一次"匹配的文本'

    mo              = phone_num_regex.findall(phone_num)
    print 'findall() 输出的结果为:'
    for item in mo:
        print item
    print 'findall() 返回 List 对象， 包含所有匹配的文本'

    #结果:
    #search() 的搜索结果是:415-555-999
    #search() 返回 Match 对象， 包含被查找字符串中的"第一次"匹配的文本
    #findall() 输出的结果为:
    #415-555-999
    #212-555-000
    #findall() 返回 List 对象， 包含所有匹配的文本
```



