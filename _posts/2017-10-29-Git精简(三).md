---
layout: post
tags: [Git] # add tag
img: git_1.png
---

# Git 精简（三）- 撤销操作

**改变最近的 commit 信息**

`git commit --amend` **用编辑器打开最近一次的提交信息，并且改变一些提交的错误(包括文件的增删改，和提交的 messge 信息)**

> 在使用命令之前，先要将需要修改（增加／删除）的文件，提交到暂存区

---

**Revert**

关于这个 revert 查了很久，看了很多的文章基本都是一带而过，而且没有实际的案例，最后翻看 Git 的文档，终于搞清楚了它的作用，下面给出几个小例子。

> 当执行 revert 命令时，Git 会做出和 revert 的 SHA 完全相反的事情。比如，你在一个 commit A 中增加了内容 'ABCD'，假设 commit A 的 SHA 是 cdef，那么执行 `git revert cdef`,会重新创建一个commit B，并且删除 Commit A 中添加的内容 'ABCD'。


> 再比如，你在一个 commit A 中删除了内容 'ABCD'，假设 commit A 的 SHA 是 cdef，那么执行 `git revert cdef`,会重新创建一个commit B，并且增加 Commit A 中删除的内容 'ABCD'。

实践1:
1. 创建 git 仓库，并且增加文件 `a.txt`，并提交到仓库。
2. 增加 `b.txt` 文件，并提交到仓库。
3. **使用 revert 命令返回到第一次 commit，并填写弹出的 message 信息**
4. 使用 'git log',查看 commit 的提交记录

![revert]({{site.baseurl}}/assets/img/E9189C6A-7826-4A14-92FA-1C0026E3058C.jpeg)

现在我们可以来分析一下 revert 命令的作用，首先 revert 做的是和对应 SHA 相反的事情，如第一次 commit 命令，增加了 `a.txt`，而对第一次命令进行 revert 的效果是删除 `a.txt`，现在仓库只有 b 文件，并且创建了一个新的 commit 来记录 revert a。





