---
layout: post
tags: [network] # add tag
img: internet.jpg
---

# ACL （访问控制列表）

ACL是一款 IOS 软件工具，而不是某种协议。从名字上来看，ACL 的主要功能是控制对网络资源的访问。事实上这是 ACL 最早的用途。现在 ACL 除了能够限制访问外，更多时候，我们用它来标识流量。（识别某种流量的特征）

ACL是一张由 permit 或 deny 的声明组成的列表

ACL 仅是一种工具，如果不进行调用的话，不会产生任何效果

ACL的使用范围，包括常见的访问控制，NAT，远程连接限制，VPN 匹配感兴趣流量，配合分法列表过滤路由等。

ACL大体可以分为标准 ACL 和扩展 ACL 两大类。可以使用的匹配流量的标准主要是 IP 数据包的 3 层和 4 层报文的内容。标准 ACL 功能较为简单，只能使用源 IP 地址对数据进行标识

ACL 使用通配符掩码来匹配一定范围内的 IP 主机
ACL 在接口上调用时，必须指定方向，AC L只对流量入接口的入方向或出接口的出方向产生效果

每个 ACL 的底部，总会包含一个隐式的拒绝语句。它会匹配所有流量。所有的 ACL 都应该至少包含一个 permit，否则该 ACL 没有意义

标准 ACL 进行访问控制

## 配置

![AC]({{site.baseurl}}/assets/img/ACL.png)

```
Router(config)#access-list 100 permit ip 10.1.4.0 0.0.0.255  10.1.8.0 0.0.0.255
Router(config)#access-list 100 permit ip 10.1.5.0 0.0.0.255 10.1.7.0 0.0.0.255
Router(config)#access-list 100 permit eigrp any any
Router(config)#do show access-lists

Router(config)#int e 0/1
Router(config-if)#ip access-group 100 out

// permit ip 允许所有的协议
```


新要求：VPC2 能 ping 通 VPC5 ，VPC5 不能 ping 通 VPC2

```
Router(config)#access-list 100 deny ip 10.1.5.0 0.0.0.255  10.1.8.0 0.0.0.255 echo-reply
Router(config)#access-list 100 permit ip any any
Router(config)#do show access-lists

Router(config)#int e 0/1
Router(config-if)#ip access-group 100 out

// permit ip 允许所有的协议
```


