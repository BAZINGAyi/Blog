---
layout: post
tags: [network] # add tag
img: internet.jpg
---

# 路由器

路由器是网络互联的核心设备，它连接不同的网络，在网络之间转发 IP 数据报

## 路由表

路由表中记录了从如何达到其他网络的信息。每条路由表主要由三部分组成：目的网络、子网掩码和下一站（路由器的端口 ip，也就是网关）

## 静态路由

> 写完立即生效
> 手工配


### 静态路由配置

> 1. 统计网络个数
> 2. 每个路由器需要配置的路由数目等于总的网络数目减去本身连接的网络数目
> 3. 配置静态路由的目的网络直接添加需要去的网络
> 4. 配置静态路由的子网掩码是需要去的网络的子网掩码
> 5. 配置静态路由的下一跳为直接相连的路由器的端口地址

![route_mode]({{site.baseurl}}/assets/img/route_model.png)


```
// R3 预配置命令
enable 
configure terminal
line console 0
no exec-timeout
logging synchronous
no ip domain lookup

// hostname R3
interface ethernet 0/0
ip address 12.1.1.1 255.255.255.0
no shutdown
exit
interface loopback 0
ip address 1.1.1.1 255.255.255.0
no shutdown
exit
// 边界配置默认路由比较省时间
ip route 0.0.0.0 0.0.0.0 12.1.1.2

// hostname R4
interface ethernet 0/0
ip address 12.1.1.2 255.255.255.0
no shutdown
exit
interface loopback 0
ip address 2.2.2.2 255.255.255.0
no shutdown
exit
interface ethernet 0/1
ip address 23.1.1.1 255.255.255.0
no shutdown
exit
// 边界配置默认路由比较省时间
ip route 1.1.1.1 255.255.255.0 12.1.1.1
ip route 3.3.3.3 255.255.255.0 23.1.1.2
```


### 静态路由的选择路径选择规则：

mask 匹配最长掩码

最长掩码一样，比较 AD

AD 一样，比较 metric

全都一样负载均摊

## 动态路由

### 按寻址算法分类

RIP、BGP

### 按链路状态分类

OSPF、IS-IS

