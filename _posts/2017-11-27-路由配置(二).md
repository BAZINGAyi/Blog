---
layout: post
tags: [network] # add tag
img: internet.jpg
---

# 动态路由

**发现远端网络**
路由器可以直接获得直连路由，这是由路由器的接口 IP 地址得到。动态路由能够自动学习远端目的路由条目

**维护和更新路由信息**
路由信息保存在路由器的路由表中。但路由的情况有时会发生变动。动态路由支持自动更新这些变化

**在多个到达目的网络的路径之中选择最优路径**
有时，路由协议会计算出到达同一目的网络的多条可用路径，路由协议需要有办法在多条路径之中选出最优的一条用于转发数据。

**在当前路径不可用发现一条新的可行路径的能力**
我们给这种过程（网络发生变化后，路由协议重新对路由进行计算并与其它路由器交换路由信息）起了一个名字，叫收敛。收敛的最终结果是网络重新回到一个稳定的正确的工作状态，我们给这种状态也起了一个名字叫收敛。收敛的速度越快越好，是体现路由协议性能的重要指标。


## EIGRP

思科私有协议，之后公开。之前因为是私有协议，导致的兼容性问题，没发展起来

### EIGRP 特性

EIGRP 收敛速度快，依靠 DUAL 算法，EIGRP 能够做到比链路状态路由协议还要迅速的收敛，快速的响应拓扑变更。

EIGRP 默认支持等价负载均衡，除此之外，目前只有 EIGRP 能够支持非等价的负载均衡。

EIGRP 通过 DUAL 算法，可以保障形成一个绝对无环的拓扑。

EIGRP 是一个无类路由协议，而它的前身 IGRP 是一个有类路由协议，EIGRP 使用组播更新，保留的组播地址为 224.0.0.10。
> 有类指的是 比如 A，B ，C 这样的网络
> 无类指的是支持子网划分

EIGRP 使用触发更新加增量更新，只在邻居刚刚建立时发送一次完整更新，之后只发送更新的内容

### EIGRP 常用概念

S:后继路由器
满足 FC，且 CD 最小的路由

FS：可行后继路由器
满足 FC，但 CD 比 S 要大的路由

AD(RD)：通告距离/报告距离
上游路由器通告给本地路由器，到达一个目标网络的距离

FD：可行距离
进入被动状态后，路由曾经拥有过的最小距离

CD：计算距离
本地路由器到达一个上游邻居的距离加上该上游邻居的 AD

FC（可行性条件）（防环）
FC 是 EIGRP 防止环路的重要参数，该条件为如果一条路由想要成为 FS，它的 AD 必须小于当前 FD。由于产生环路时，数据一定是经过了一定的路由器后又回到了某台路由器，这时，该路由累加的开销，一定会大于当前从这台路由器到达目的网络的开销。









