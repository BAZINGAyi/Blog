---
layout: post
tags: [js] # add tag
img: js-head.png
---
# jQuery 应用(二)

## 事件监听toggleClass

[Chrome 事件监听函数说明](https://developers.google.com/web/tools/chrome-devtools/console/events?hl=en#monitor-events)

**事件监听函数**

```js
$( '#my-input' ).on( 'keypress', function() {
    // to do something
});
```

```js
$( "#my-input" ).keypress(function() {
  // to do something
});
```

---

[jQuery's Event Object](https://api.jquery.com/category/events/event-object/)

[event.target property](https://api.jquery.com/event.target/)

[DOM Level 3 Events](https://www.w3.org/TR/DOM-Level-3-Events/)

[jQuery Events](https://api.jquery.com/category/events/)

## 事件委托

**谨慎的使用事件监听在创建节点时**

例如以下的情况，`<body>` 是不会被添加上 `selected` 的，因为在脚本的执行前，`<body>`  下的节点还没有被添加上

```js
$( 'article' ).on( 'click', function() {
    $( 'body' ).addClass( 'selected' );   
});

$( 'body' ).append( '<article> <h1>Appended Article</h1> <p>Content for the new article </p> </article>' );
```
---

**使用事件委托来解决问题**

**jQuery 会监听父元素（下方 `container` ）,当有事件（下方 `click `）发生的时候，会检查是目标元素（下方 `article`）是否存在**

```js
$( '.container' ).on( 'click', 'article', function() { … });
```

---

**使用事件委托的还可以减少监听的设置**

比如我门有 1000 个 list items 在页面中：

```html
<ul id="rooms">
    <li>Room 1</li>
    <li>Room 2</li>
            .
            .
            .
    <li>Room 999</li>
    <li>Room 1000</li>
</ul>
```

我们想给 `<li>` 设置一个监听的事件，通常的做法会是这样：

```js
$( '#rooms li' ).on( 'click', function() {
    ...
});
```

当这实际上是给每个 `<li>` 都设置了一个监听器，有 1000 个！

这时我们可以利用事件委托,仅仅监听一个元素 `#rooms`，然后看它有没有目标的元素 list item 就好了

```js
$( '#rooms' ).on( 'click', 'li', function() {
    ...
});
```



